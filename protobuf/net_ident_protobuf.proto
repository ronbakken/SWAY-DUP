/*
INF Marketplace
Copyright (C) 2018  INF Marketplace LLC
Author: Jan Boon <kaetemi@no-break.space>
*/

syntax = "proto3";

package inf_common;
option csharp_namespace = "InfCommon";

import 'enum_protobuf.proto';
import 'data_protobuf.proto';

/// Session payload. Assumes a secure connection is used.
message NetSessionPayload {
  /// If not set, require session creation.
  Int64 session_id = 1;
  bytes cookie = 2;
  
}

/// Create a session with the current payload cookie
/// Procedure ID: 'SESSIONC'
/// Response: NetSession
message NetSessionCreate {
  /// Token for tracking which device, for statistics purposes only, not secure.
  /// Used to track multiple sessions accross a device (administration tools).
  bytes device_token = 1;
  
  /// More device information for developers
  string device_name = 2;
  string device_info = 3;
  
}

/// Session created successfully,
message NetSession {
  /// Newly created session id.
  Int64 session_id;
  
}

// ---- DEPRECATED -----

// Protobuf types list:
// https://developers.google.com/protocol-buffers/docs/proto?csw=1#scalar

// Sends some info from https://pub.dartlang.org/packages/device_info#-readme-tab-
// Name: DA_CREAT
// Response: NetDeviceAuthState
/*
message NetDeviceAuthCreateReq {
  // Public key for future authentication (AES-256)
  bytes aesKey = 1;
  
  // Common identifier for the device in case of multiple accounts
  bytes commonDeviceId = 4;
  
  // Device information for developers
  string name = 2;
  string info = 3;
  
}
*/

// Device requires an authentication challenge
// Name: DA_CHALL
// Response: NetDevAuthChallengeResReq
/*
message NetDeviceAuthChallengeReq {
  // Id of the device session that wants to authenticate
  int64 sessionId = 1;
  
}
*/

// Server supplies challenge for the device
// Name: DA_R_CHA
// Response: NetDeviceAuthSignatureResReq
/*
message NetDeviceAuthChallengeResReq {
  bytes challenge = 1;
  
}
*/

// App completes the challenge
// Name: DA_R_SIG
// Response: NetDeviceAuthState
/*
message NetDeviceAuthSignatureResReq {
  bytes signature = 1;
  
}
*/

// Create or auth result
// Name: DA_STATE
/*
message NetDeviceAuthState {
  /// Whole account data
  DataAccount data = 8;
  
}
*/

/* end of file */
